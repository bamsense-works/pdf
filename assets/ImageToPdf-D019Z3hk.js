import{r as d,d as N,e as y,f as w,j as e,A as P,X as F}from"./index-n4hANkp9.js";import{s as t,P as R,R as C,F as U,A as g,i as D}from"./MergePdf.module-CsgLC5TJ.js";import{P as L,R as k,a as I}from"./Item-BDfEjdxG.js";import{T}from"./trash-2-CaLfTa1W.js";import"./index-D7F2rPb2.js";const S=()=>Math.random().toString(36).substring(2,15),G=()=>{const[r,c]=d.useState([]),[j,h]=d.useState(!1),[l,u]=d.useState(null),{addToast:p}=N(),o=y(),f=w.useRef(!1);d.useEffect(()=>{!f.current&&o.state?.initialFiles&&o.state.initialFiles.length>0&&(f.current=!0,m(o.state.initialFiles),window.history.replaceState({},document.title))},[o]);const m=s=>{const i=Array.from(s).filter(a=>a.type.startsWith("image/")).map(a=>({file:a,id:S(),name:a.name,preview:URL.createObjectURL(a)}));c(a=>[...a,...i])},b=s=>{c(n=>{const i=n.find(a=>a.id===s);return i&&URL.revokeObjectURL(i.preview),n.filter(a=>a.id!==s)})},v=async()=>{if(r.length!==0){h(!0),await new Promise(s=>setTimeout(s,1e3));try{const s=await D(r.map(i=>i.file)),n=URL.createObjectURL(s);u(n),p("PDF created successfully!","success")}catch(s){console.error(s),p("Failed to create PDF.","error")}finally{h(!1)}}},x=()=>{r.forEach(s=>URL.revokeObjectURL(s.preview)),c([]),l&&URL.revokeObjectURL(l),u(null)};return l?e.jsx("div",{className:t.container,children:e.jsxs("div",{className:t.successCard,children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"rounded-lg overflow-hidden shadow-2xl border border-slate-200 bg-white relative",children:e.jsx(R,{url:l,pageIndex:0,width:200})})}),e.jsx("h2",{className:t.title,children:"PDF Created!"}),e.jsx("p",{className:t.subtitle,style:{marginBottom:"2rem"},children:"Your images have been combined into a PDF."}),e.jsxs("div",{className:"flex flex-col gap-6 items-center w-full max-w-[300px] mx-auto",children:[e.jsx("a",{href:l,download:"bamsense_images.pdf",className:"btn btn-action w-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all",children:"Download PDF"}),e.jsxs("button",{onClick:x,className:"btn w-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors",children:[e.jsx(C,{size:16,className:"mr-2"})," Convert more"]})]})]})}):e.jsxs("div",{className:t.container,children:[e.jsxs("div",{className:t.header,children:[e.jsx("h2",{className:t.title,children:"JPG to PDF"}),e.jsx("p",{className:t.subtitle,children:"Convert JPG and PNG images to PDF."})]}),r.length===0?e.jsx(U,{onFilesSelected:m,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]}}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[e.jsxs("span",{className:"text-sm font-medium text-secondary flex items-center gap-2",children:[e.jsx(g,{size:16,className:"text-accent-secondary"})," Drag items to reorder"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>document.getElementById("add-img-input").click(),className:"btn text-xs bg-accent-primary/10 text-accent-primary hover:bg-accent-primary/20 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(L,{size:14})," Add more"]}),e.jsxs("button",{onClick:x,className:"btn text-xs bg-red-50 text-red-600 hover:bg-red-100 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(T,{size:14})," Clear all"]})]}),e.jsx("input",{id:"add-img-input",type:"file",accept:".jpg,.jpeg,.png",multiple:!0,hidden:!0,onChange:s=>m(s.target.files)})]}),e.jsx(k,{axis:"y",values:r,onReorder:c,className:t.fileList,children:e.jsx(P,{children:r.map(s=>e.jsxs(I,{value:s,className:t.fileItem,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("img",{src:s.preview,alt:"",className:"w-10 h-14 object-cover rounded border border-slate-200 bg-slate-50"}),e.jsx("span",{className:t.fileName,children:s.name})]}),e.jsx("button",{onClick:()=>b(s.id),className:t.removeBtn,children:e.jsx(F,{size:18})})]},s.id))})}),e.jsxs("div",{className:t.actionBar,children:[e.jsx("button",{onClick:x,className:"btn",style:{background:"var(--bg-tertiary)"},children:"Cancel"}),e.jsxs("button",{onClick:v,className:"btn btn-action",children:["Convert to PDF ",e.jsx(g,{size:18,className:"ml-2"})]})]})]}),j&&e.jsxs("div",{className:t.loadingOverlay,children:[e.jsx("div",{className:t.spinner}),e.jsx("p",{className:"mt-4 font-medium text-primary",children:"Generating PDF..."})]})]})};export{G as default};
