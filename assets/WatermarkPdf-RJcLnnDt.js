import{c as o,r,d as _,e as D,f as B,j as e,b as $,R as O}from"./index-n4hANkp9.js";import{s,P as C,R as L,F as A,A as E,w as U,b as N}from"./MergePdf.module-CsgLC5TJ.js";import"./index-D7F2rPb2.js";const q=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],H=o("droplets",q);const V=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],G=o("grid-3x3",V);const J=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],K=o("maximize",J);const Q=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],X=o("palette",Q);const Y=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Z=o("square",Y);const ee=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],te=o("type",ee),re=i=>{const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return n?N(parseInt(n[1],16)/255,parseInt(n[2],16)/255,parseInt(n[3],16)/255):N(0,0,0)},ne=()=>{const[i,n]=r.useState(null),[l,f]=r.useState("CONFIDENTIAL"),[c,I]=r.useState("#ef4444"),[m,R]=r.useState(.5),[x,F]=r.useState(60),[p,T]=r.useState(45),[a,u]=r.useState(!1),[W,v]=r.useState(!1),[d,b]=r.useState(null),{addToast:j}=_(),h=D(),w=B.useRef(!1);r.useEffect(()=>{!w.current&&h.state?.initialFiles&&h.state.initialFiles.length>0&&(w.current=!0,k(h.state.initialFiles),window.history.replaceState({},document.title))},[h]);const k=t=>{t.length>0&&n(t[0])},M=async()=>{if(!(!i||!l)){v(!0),await new Promise(t=>setTimeout(t,1e3));try{const t=re(c),z={size:parseInt(x),opacity:parseFloat(m),color:t,position:a?"tiled":"center",rotation:parseInt(p)},y=await U(i,l,z),g=URL.createObjectURL(y);b(g),j("Watermark added successfully!","success")}catch(t){console.error(t),j("Watermarking failed.","error")}finally{v(!1)}}},S=()=>{n(null),d&&URL.revokeObjectURL(d),b(null),f("CONFIDENTIAL")},P=()=>{const t={position:"absolute",color:c,opacity:m,fontSize:`${x*.6}px`,fontWeight:"bold",fontFamily:"Helvetica, sans-serif",whiteSpace:"nowrap",pointerEvents:"none",zIndex:10,transform:`translate(-50%, -50%) rotate(${-p}deg)`};return a?[{x:20,y:20},{x:50,y:20},{x:80,y:20},{x:20,y:50},{x:50,y:50},{x:80,y:50},{x:20,y:80},{x:50,y:80},{x:80,y:80}].map((y,g)=>e.jsx("div",{style:{...t,top:`${y.y}%`,left:`${y.x}%`},children:l},g)):e.jsx("div",{style:{...t,top:"50%",left:"50%"},children:l})};return d?e.jsx("div",{className:s.container,children:e.jsxs("div",{className:s.successCard,children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"rounded-lg overflow-hidden shadow-2xl border border-slate-200 bg-white relative",children:e.jsx(C,{url:d,pageIndex:0,width:240})})}),e.jsx("h2",{className:s.title,children:"Watermark Ready!"}),e.jsxs("div",{className:"flex flex-col gap-6 items-center w-full max-w-[300px] mx-auto mt-6",children:[e.jsx("a",{href:d,download:"bamsense_watermarked.pdf",className:"btn btn-action w-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all",children:"Download PDF"}),e.jsxs("button",{onClick:S,className:"btn w-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors",children:[e.jsx(L,{size:16,className:"mr-2"})," Start Over"]})]})]})}):e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"0 1rem"},children:[e.jsxs("div",{className:s.header,children:[e.jsx("h2",{className:s.title,children:"Watermark Studio"}),e.jsx("p",{className:s.subtitle,children:"Design and apply professional stamps to your documents."})]}),i?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:{backgroundColor:"var(--card-bg)",padding:"2rem",borderRadius:"16px",border:"1px solid var(--border-color)",boxShadow:"var(--shadow-sm)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem",borderBottom:"1px solid var(--border-color)",paddingBottom:"1rem"},children:[e.jsx("div",{style:{padding:"0.5rem",background:"rgba(181, 70, 90, 0.1)",color:"var(--accent-secondary)",borderRadius:"8px"},children:e.jsx($,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontWeight:700,fontSize:"1.1rem"},children:"Configuration"}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:i.name})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"wm-text",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,marginBottom:"0.5rem",fontSize:"0.9rem"},children:[e.jsx(te,{size:16,color:"var(--accent-secondary)"})," Watermark Text"]}),e.jsx("input",{id:"wm-text",name:"watermarkText",type:"text",value:l,onChange:t=>f(t.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-primary)",fontSize:"1rem",fontWeight:500,outline:"none"},placeholder:"e.g. DRAFT",autoComplete:"off"})]}),e.jsxs("div",{style:{background:"var(--bg-primary)",padding:"0.5rem",borderRadius:"8px",display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>u(!1),style:{flex:1,padding:"0.5rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:500,background:a?"transparent":"var(--card-bg)",boxShadow:a?"none":"0 2px 4px rgba(0,0,0,0.1)",color:a?"var(--text-secondary)":"var(--text-primary)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(Z,{size:16})," Single"]}),e.jsxs("button",{onClick:()=>u(!0),style:{flex:1,padding:"0.5rem",borderRadius:"6px",fontSize:"0.9rem",fontWeight:500,background:a?"var(--card-bg)":"transparent",boxShadow:a?"0 2px 4px rgba(0,0,0,0.1)":"none",color:a?"var(--text-primary)":"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(G,{size:16})," Tiled"]})]}),e.jsxs("div",{style:{background:"var(--bg-primary)",padding:"1.5rem",borderRadius:"12px",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"wm-color",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,marginBottom:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(X,{size:14})," Color"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{id:"wm-color",name:"watermarkColor",type:"color",value:c,onChange:t=>I(t.target.value),style:{width:"40px",height:"40px",border:"none",cursor:"pointer",padding:0,background:"none"}}),e.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.8rem",color:"var(--text-secondary)"},children:c})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"wm-opacity",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,marginBottom:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(H,{size:14})," Opacity: ",Math.round(m*100),"%"]}),e.jsx("input",{id:"wm-opacity",name:"watermarkOpacity",type:"range",min:"0.1",max:"1",step:"0.1",value:m,onChange:t=>R(t.target.value),style:{width:"100%",cursor:"pointer"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"wm-size",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,marginBottom:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(K,{size:14})," Size: ",x,"px"]}),e.jsx("input",{id:"wm-size",name:"watermarkSize",type:"range",min:"20",max:"150",value:x,onChange:t=>F(t.target.value),style:{width:"100%",cursor:"pointer"}})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"wm-rotate",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,marginBottom:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(O,{size:14})," Rotation: ",p,"Â°"]}),e.jsx("input",{id:"wm-rotate",name:"watermarkRotation",type:"range",min:"-90",max:"90",value:p,onChange:t=>T(t.target.value),style:{width:"100%",cursor:"pointer"}})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsx("button",{onClick:S,className:"btn",style:{flex:1,background:"var(--bg-tertiary)"},children:"Cancel"}),e.jsxs("button",{onClick:M,className:"btn btn-action",style:{flex:2},children:["Apply ",e.jsx(E,{size:18,className:"ml-2"})]})]})]})]}),e.jsxs("div",{style:{background:"#0f172a",padding:"2rem",borderRadius:"16px",display:"flex",flexDirection:"column",alignItems:"center",minHeight:"600px",justifyContent:"center",position:"relative",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{marginBottom:"1rem",width:"100%",display:"flex",justifyContent:"space-between",color:"#94a3b8",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:[e.jsx("span",{children:"Preview Mode"}),e.jsx("span",{children:"Page 1"})]}),e.jsx("div",{style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},children:e.jsx(C,{file:i,pageIndex:0,width:400,className:"block",children:P()})})]})]}):e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsx(A,{onFilesSelected:k,multiple:!1})}),W&&e.jsx("div",{className:s.loadingOverlay,children:e.jsx("div",{className:s.spinner})})]})};export{ne as default};
