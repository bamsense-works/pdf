import{r,d as g,e as p,f as b,j as e}from"./index-n4hANkp9.js";import{s,P as u,R as N,F as w,A as y,p as C}from"./MergePdf.module-CsgLC5TJ.js";import{T as P}from"./trash-2-CaLfTa1W.js";import"./index-D7F2rPb2.js";const k=()=>{const[a,o]=r.useState(null),[f,c]=r.useState(!1),[l,d]=r.useState(null),{addToast:m}=g(),i=p(),h=b.useRef(!1);r.useEffect(()=>{!h.current&&i.state?.initialFiles&&i.state.initialFiles.length>0&&(h.current=!0,x(i.state.initialFiles),window.history.replaceState({},document.title))},[i]);const x=t=>{t.length>0&&o(t[0])},j=async()=>{if(a){c(!0);try{const t=await C(a),v=URL.createObjectURL(t);d(v),m("Conversion successful!","success")}catch(t){console.error(t),m("Conversion failed. Ensure the PDF is not password protected.","error")}finally{c(!1)}}},n=()=>{o(null),l&&URL.revokeObjectURL(l),d(null)};return l?e.jsx("div",{className:s.container,children:e.jsxs("div",{className:s.successCard,children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"rounded-lg overflow-hidden shadow-2xl border border-slate-200 bg-white relative",children:e.jsx(u,{url:URL.createObjectURL(a),pageIndex:0,width:200})})}),e.jsx("h2",{className:s.title,children:"Conversion Complete!"}),e.jsx("p",{className:s.subtitle,style:{marginBottom:"2rem"},children:"Your images are ready in a ZIP archive."}),e.jsxs("div",{className:"flex flex-col gap-6 items-center w-full max-w-[300px] mx-auto",children:[e.jsx("a",{href:l,download:"bamsense_images.zip",className:"btn btn-action w-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all",children:"Download Images (ZIP)"}),e.jsxs("button",{onClick:n,className:"btn w-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors",children:[e.jsx(N,{size:16,className:"mr-2"})," Convert another"]})]})]})}):e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.header,children:[e.jsx("h2",{className:s.title,children:"PDF to JPG"}),e.jsx("p",{className:s.subtitle,children:"Convert every page of this PDF to high-quality JPG images."})]}),a?e.jsxs("div",{className:"max-w-xl mx-auto",children:[e.jsxs("div",{className:s.fileItem,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-14 bg-slate-100 shrink-0 border border-slate-200 rounded overflow-hidden",children:e.jsx(u,{file:a,pageIndex:0,width:40})}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("span",{className:s.fileName,children:a.name}),e.jsxs("span",{className:s.fileSize,children:[(a.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:[e.jsx(P,{size:16})," Change"]})]}),e.jsxs("div",{className:s.actionBar,children:[e.jsx("button",{onClick:n,className:"btn",style:{background:"var(--bg-tertiary)"},children:"Cancel"}),e.jsxs("button",{onClick:j,className:"btn btn-action",children:["Convert to JPG ",e.jsx(y,{size:18,className:"ml-2"})]})]})]}):e.jsx(w,{onFilesSelected:x,multiple:!1}),f&&e.jsxs("div",{className:s.loadingOverlay,children:[e.jsx("div",{className:s.spinner}),e.jsx("p",{className:"mt-4 font-medium text-primary",children:"Rendering pages..."})]})]})};export{k as default};
