import{c as N,i as T,g as v,h as X,r as d,k as H,l as Y,n as _,o as q,p as I,q as z,s as B,m as j,j as E,t as D}from"./index-n4hANkp9.js";const U=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],it=N("plus",U);function J(...t){const n=!Array.isArray(t[0]),e=n?0:-1,r=t[0+e],o=t[1+e],c=t[2+e],s=t[3+e],u=T(o,c,s);return n?u(r):u}function O(t){const n=v(()=>X(t)),{isStatic:e}=d.useContext(H);if(e){const[,r]=d.useState(t);d.useEffect(()=>n.on("change",r),[])}return n}function P(t,n){const e=O(n()),r=()=>e.set(n());return r(),Y(()=>{const o=()=>q.preRender(r,!1,!0),c=t.map(s=>s.on("change",o));return()=>{c.forEach(s=>s()),_(r)}}),e}function K(t){I.current=[],t();const n=P(I.current,t);return I.current=void 0,n}function Q(t,n,e,r){if(typeof t=="function")return K(t);const c=typeof n=="function"?n:J(n,e,r);return Array.isArray(t)?V(t,c):V([t],([s])=>c(s))}function V(t,n){const e=v(()=>[]);return P(t,()=>{e.length=0;const r=t.length;for(let o=0;o<r;o++)e[o]=t[o].get();return n(e)})}const W=d.createContext(null);function Z(t,n,e,r){if(!r)return t;const o=t.findIndex(m=>m.value===n);if(o===-1)return t;const c=r>0?1:-1,s=t[o+c];if(!s)return t;const u=t[o],l=s.layout,a=z(l.min,l.max,.5);return c===1&&u.layout.max+e>a||c===-1&&u.layout.min+e<a?B(t,o,o+c):t}function $({children:t,as:n="ul",axis:e="y",onReorder:r,values:o,...c},s){const u=v(()=>j[n]),l=[],a=d.useRef(!1),m=d.useRef(null),g={axis:e,groupRef:m,registerItem:(f,x)=>{const h=l.findIndex(i=>f===i.value);h!==-1?l[h].layout=x[e]:l.push({value:f,layout:x[e]}),l.sort(et)},updateOrder:(f,x,h)=>{if(a.current)return;const i=Z(l,f,x,h);l!==i&&(a.current=!0,r(i.map(tt).filter(y=>o.indexOf(y)!==-1)))}};d.useEffect(()=>{a.current=!1});const A=f=>{m.current=f,typeof s=="function"?s(f):s&&(s.current=f)},p={overflowAnchor:"none",...c.style};return E.jsx(u,{...c,style:p,ref:A,ignoreStrict:!0,children:E.jsx(W.Provider,{value:g,children:t})})}const at=d.forwardRef($);function tt(t){return t.value}function et(t,n){return t.layout.min-n.layout.min}const C=50,b=25,nt=new Set(["auto","scroll"]),w=new WeakMap,R=new WeakMap;let S=null;function ot(){if(S){const t=M(S,"y");t&&(R.delete(t),w.delete(t));const n=M(S,"x");n&&n!==t&&(R.delete(n),w.delete(n)),S=null}}function rt(t,n){const e=getComputedStyle(t),r=n==="x"?e.overflowX:e.overflowY;return nt.has(r)}function M(t,n){let e=t?.parentElement;for(;e;){if(rt(e,n))return e;e=e.parentElement}return null}function st(t,n,e){const r=n.getBoundingClientRect(),o=e==="x"?r.left:r.top,c=e==="x"?r.right:r.bottom,s=t-o,u=c-t;if(s<C){const l=1-s/C;return{amount:-b*l*l,edge:"start"}}else if(u<C){const l=1-u/C;return{amount:b*l*l,edge:"end"}}return{amount:0,edge:null}}function ct(t,n,e,r){if(!t)return;S=t;const o=M(t,e);if(!o)return;const c=n-(e==="x"?window.scrollX:window.scrollY),{amount:s,edge:u}=st(c,o,e);if(u===null){R.delete(o),w.delete(o);return}if(R.get(o)!==u){if(!(u==="start"&&r<0||u==="end"&&r>0))return;R.set(o,u);const m=e==="x"?o.scrollWidth-o.clientWidth:o.scrollHeight-o.clientHeight;w.set(o,m)}if(s>0){const a=w.get(o);if((e==="x"?o.scrollLeft:o.scrollTop)>=a)return}e==="x"?o.scrollLeft+=s:o.scrollTop+=s}function k(t,n=0){return D(t)?t:O(n)}function ut({children:t,style:n={},value:e,as:r="li",onDrag:o,onDragEnd:c,layout:s=!0,...u},l){const a=v(()=>j[r]),m=d.useContext(W),g={x:k(n.x),y:k(n.y)},A=Q([g.x,g.y],([i,y])=>i||y?1:"unset"),{axis:p,registerItem:f,updateOrder:x,groupRef:h}=m;return E.jsx(a,{drag:p,...u,dragSnapToOrigin:!0,style:{...n,x:g.x,y:g.y,zIndex:A},layout:s,onDrag:(i,y)=>{const{velocity:L,point:F}=y,G=g[p].get();x(e,G,L[p]),ct(h.current,F[p],p,L[p]),o&&o(i,y)},onDragEnd:(i,y)=>{ot(),c&&c(i,y)},onLayoutMeasure:i=>{f(e,i)},ref:l,ignoreStrict:!0,children:t})}const ft=d.forwardRef(ut);export{it as P,at as R,ft as a};
