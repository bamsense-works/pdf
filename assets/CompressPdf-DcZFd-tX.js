import{c as m,r,d as S,e as F,f as P,j as e,M as T}from"./index-n4hANkp9.js";import{s as i,P as B,A as N,R as z,F as _,c as L}from"./MergePdf.module-CsgLC5TJ.js";import"./index-D7F2rPb2.js";const I=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],U=m("chart-column",I);const D=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],E=m("check",D);const A=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],O=m("leaf",A);const W=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$=m("zap",W),G=()=>{const[t,u]=r.useState(null),[a,p]=r.useState("medium"),[k,f]=r.useState(!1),[n,g]=r.useState(null),[b,y]=r.useState(null),{addToast:x}=S(),d=F(),j=P.useRef(!1);r.useEffect(()=>{!j.current&&d.state?.initialFiles&&d.state.initialFiles.length>0&&(j.current=!0,v(d.state.initialFiles),window.history.replaceState({},document.title))},[d]);const v=s=>{s.length>0&&u(s[0])},o=s=>{if(s===0)return"0 B";const l=1024,c=["B","KB","MB","GB"],w=Math.floor(Math.log(s)/Math.log(l));return parseFloat((s/Math.pow(l,w)).toFixed(2))+" "+c[w]},C=r.useMemo(()=>t?{low:Math.round(t.size*.95),medium:Math.round(t.size*.85),high:Math.round(t.size*.4)}:{},[t]),M=async()=>{if(t){f(!0),await new Promise(s=>setTimeout(s,1500));try{const s=await L(t,a),l=URL.createObjectURL(s);g(l),y(s.size),s.size<t.size?x("Compression complete!","success"):x("File was already optimized.","info")}catch(s){console.error(s),x("Compression failed.","error")}finally{f(!1)}}},h=()=>{u(null),n&&URL.revokeObjectURL(n),g(null),y(null),p("medium")};if(n){const s=t.size-b,l=Math.max(0,Math.round(s/t.size*100)),c=s>1024;return e.jsx("div",{className:i.container,children:e.jsxs("div",{className:i.successCard,children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"rounded-lg overflow-hidden shadow-2xl border border-slate-200 bg-white relative",children:e.jsx(B,{url:n,pageIndex:0,width:200})})}),e.jsx("h2",{className:i.title,children:c?"PDF Compressed!":"Optimization Complete"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Original"}),e.jsx("p",{className:"text-lg font-mono text-slate-500 line-through",children:o(t.size)})]}),e.jsx(N,{size:20,className:"text-accent-secondary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs text-accent-secondary uppercase tracking-wider font-bold",children:"New Size"}),e.jsx("p",{className:"text-2xl font-mono font-bold text-accent-primary",children:o(b)})]})]}),c?e.jsxs("div",{className:"bg-emerald-50 text-emerald-700 px-4 py-2 rounded-full inline-block font-medium text-sm mb-6 border border-emerald-100",children:["Saved ",o(s)," (",l,"%)"]}):e.jsxs("div",{className:"bg-blue-50 text-blue-700 px-4 py-2 rounded-lg inline-block font-medium text-sm mb-6 border border-blue-100 text-left max-w-sm",children:[e.jsx("p",{className:"font-bold mb-1",children:"Already Optimized"}),e.jsx("p",{className:"text-xs opacity-80",children:'This file is very efficient. To reduce it further, try "Extreme" mode (converts text to images).'})]}),e.jsxs("div",{className:"flex flex-col gap-6 items-center w-full max-w-[300px] mx-auto",children:[e.jsx("a",{href:n,download:`bamsense_compressed_${Date.now()}.pdf`,className:"btn btn-action w-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all",children:"Download Result"}),e.jsxs("button",{onClick:h,className:"btn w-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors",children:[e.jsx(z,{size:16,className:"mr-2"})," Try another setting"]})]})]})})}const R=[{id:"low",title:"Light",desc:"Removes metadata only.",icon:O,color:"#10b981",bg:"bg-emerald-50"},{id:"medium",title:"Balanced",desc:"Standard optimization.",icon:U,color:"#3b82f6",bg:"bg-blue-50"},{id:"high",title:"Extreme",desc:"Rasterizes pages. Text becomes image.",icon:$,color:"#f59e0b",bg:"bg-amber-50"}];return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"0 1rem"},children:[e.jsxs("div",{className:i.header,children:[e.jsx("h2",{className:i.title,children:"Compress PDF"}),e.jsx("p",{className:i.subtitle,children:'Reduce file size. Use "Extreme" for maximum reduction.'})]}),t?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2rem"},children:[e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"1px solid var(--border-color)",boxShadow:"var(--shadow-sm)",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(T,{size:20,className:"text-accent-secondary"}),e.jsx("span",{className:"font-semibold",children:t.name}),e.jsx("span",{className:"text-sm text-secondary bg-slate-100 px-2 py-1 rounded",children:o(t.size)}),e.jsx("button",{onClick:h,className:"text-red-400 hover:text-red-500 ml-4",children:e.jsx(z,{size:16})})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",width:"100%"},children:R.map(s=>e.jsxs("div",{onClick:()=>p(s.id),style:{cursor:"pointer",position:"relative",background:"var(--card-bg)",borderRadius:"16px",border:a===s.id?`2px solid ${s.color}`:"2px solid transparent",padding:"1.5rem",boxShadow:a===s.id?"var(--shadow-md)":"var(--shadow-sm)",transition:"all 0.2s ease",transform:a===s.id?"translateY(-4px)":"none"},className:"group hover:bg-slate-50",children:[e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",width:"24px",height:"24px",borderRadius:"50%",border:a===s.id?`2px solid ${s.color}`:"2px solid var(--border-color)",background:a===s.id?s.color:"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"white",transition:"all 0.2s"},children:a===s.id&&e.jsx(E,{size:14})}),e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem",color:s.color,background:a===s.id?s.bg:"var(--bg-primary)"},children:e.jsx(s.icon,{size:24})}),e.jsx("h3",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"0.25rem"},children:s.title}),e.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem",marginBottom:"1.5rem"},children:s.desc}),e.jsxs("div",{style:{background:"var(--bg-primary)",padding:"0.5rem",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)",textTransform:"uppercase"},children:"Target"}),e.jsxs("span",{style:{fontWeight:700,fontFamily:"monospace",color:s.color},children:["~",o(C[s.id])]})]})]},s.id))}),e.jsxs("div",{style:{display:"flex",gap:"1rem",width:"100%",maxWidth:"400px",marginTop:"1rem"},children:[e.jsx("button",{onClick:h,className:"btn",style:{flex:1,background:"var(--bg-tertiary)"},children:"Cancel"}),e.jsxs("button",{onClick:M,className:"btn btn-action",style:{flex:1.5},children:["Compress PDF ",e.jsx(N,{size:18,className:"ml-2"})]})]})]}):e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsx(_,{onFilesSelected:v,multiple:!1})}),k&&e.jsx("div",{className:i.loadingOverlay,children:e.jsx("div",{className:i.spinner})})]})};export{G as default};
