import{c as f,r as l,d as N,e as k,f as F,j as e,R as P}from"./index-n4hANkp9.js";import{s,P as b,R as C,F as S,A as D,r as L}from"./MergePdf.module-CsgLC5TJ.js";import"./index-D7F2rPb2.js";const U=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],z=f("rotate-ccw",U);const I=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],W=f("undo-2",I),T=()=>{const[a,c]=l.useState(null),[i,r]=l.useState(0),[g,x]=l.useState(!1),[o,h]=l.useState(null),{addToast:d}=N(),n=k(),m=F.useRef(!1);l.useEffect(()=>{!m.current&&n.state?.initialFiles&&n.state.initialFiles.length>0&&(m.current=!0,u(n.state.initialFiles),window.history.replaceState({},document.title))},[n]);const u=t=>{t.length>0&&(c(t[0]),r(0))},v=()=>r(t=>(t-90)%360),y=()=>r(t=>(t+90)%360),j=()=>r(0),w=async()=>{if(a){if(i===0){d("No rotation selected.","info");return}x(!0),await new Promise(t=>setTimeout(t,800));try{const t=await L(a,i),R=URL.createObjectURL(t);h(R),d("PDF rotated successfully!","success")}catch(t){console.error(t),d("Rotation failed.","error")}finally{x(!1)}}},p=()=>{c(null),o&&URL.revokeObjectURL(o),h(null),r(0)};return o?e.jsx("div",{className:s.container,children:e.jsxs("div",{className:s.successCard,children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"rounded-lg overflow-hidden shadow-2xl border border-slate-200 bg-white relative",children:e.jsx(b,{url:o,pageIndex:0,width:240})})}),e.jsx("h2",{className:s.title,children:"PDF Rotated!"}),e.jsxs("div",{className:"flex flex-col gap-6 items-center w-full max-w-[300px] mx-auto mt-6",children:[e.jsx("a",{href:o,download:"bamsense_rotated.pdf",className:"btn btn-action w-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all",children:"Download PDF"}),e.jsxs("button",{onClick:p,className:"btn w-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors",children:[e.jsx(C,{size:16,className:"mr-2"})," Start Over"]})]})]})}):e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"0 1rem"},children:[e.jsxs("div",{className:s.header,children:[e.jsx("h2",{className:s.title,children:"Rotate PDF"}),e.jsx("p",{className:s.subtitle,children:"Permanently rotate your PDF pages to the correct orientation."})]}),a?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2rem"},children:[e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"2rem",borderRadius:"16px",border:"1px solid var(--border-color)",boxShadow:"var(--shadow-sm)",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:"1rem",left:"1rem",background:"var(--bg-primary)",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.8rem",color:"var(--text-secondary)",fontWeight:500},children:a.name}),e.jsx("div",{style:{margin:"2rem 0",transition:"all 0.3s ease",filter:"drop-shadow(0 20px 30px rgba(0,0,0,0.15))"},children:e.jsx("div",{style:{borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border-color)"},children:e.jsx(b,{file:a,pageIndex:0,width:300,rotation:i,className:"block"})})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--bg-primary)",padding:"0.75rem",borderRadius:"12px"},children:[e.jsx("button",{onClick:v,className:"btn",style:{background:"var(--card-bg)",border:"1px solid var(--border-color)",width:"50px",height:"50px",padding:0},title:"Rotate Left (-90째)",children:e.jsx(z,{size:20})}),e.jsxs("div",{style:{width:"80px",textAlign:"center",fontFamily:"monospace",fontWeight:700,color:"var(--text-primary)"},children:[i,"째"]}),e.jsx("button",{onClick:y,className:"btn",style:{background:"var(--card-bg)",border:"1px solid var(--border-color)",width:"50px",height:"50px",padding:0},title:"Rotate Right (+90째)",children:e.jsx(P,{size:20})}),e.jsx("div",{style:{width:"1px",height:"30px",background:"var(--border-color)",margin:"0 0.5rem"}}),e.jsxs("button",{onClick:j,className:"btn",style:{background:"transparent",color:"var(--text-secondary)",fontSize:"0.8rem",gap:"0.5rem"},title:"Reset to 0째",children:[e.jsx(W,{size:16})," Reset"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",width:"100%",maxWidth:"400px"},children:[e.jsx("button",{onClick:p,className:"btn",style:{flex:1,background:"var(--bg-tertiary)"},children:"Cancel"}),e.jsxs("button",{onClick:w,className:"btn btn-action",style:{flex:1.5},children:["Rotate PDF ",e.jsx(D,{size:18,className:"ml-2"})]})]})]}):e.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:e.jsx(S,{onFilesSelected:u,multiple:!1})}),g&&e.jsx("div",{className:s.loadingOverlay,children:e.jsx("div",{className:s.spinner})})]})};export{T as default};
